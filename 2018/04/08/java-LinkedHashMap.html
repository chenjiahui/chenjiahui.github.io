<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="author" content="chenjiahui" />
    <meta name="robots" content="index, follow"/>

    <meta property="og:title" content="Java LinkedHashMap"/>
    <meta property="og:url" content="http://chenjiahui.hot-cool.cn/2018/04/08/java-LinkedHashMap.html"/>
    <meta property="og:site_name" content="BugManagerâ€™s Blog"/>
    <meta property="og:type" content="article"/>

    <link rel="canonical" href="http://chenjiahui.hot-cool.cn/2018/04/08/java-LinkedHashMap.html" />

    <title>Java LinkedHashMap | BugManagerâ€™s Blog (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" />

    <link rel="stylesheet" type="text/css" href="http://chenjiahui.hot-cool.cn/theme/css/main.css" />

    <script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">
        stLight.options({
            publisher: "",
            doNotHash: false,
            doNotCopy: false,
            hashAddressBar: false
        });
    </script>
</head>

<body id="index">
    <div class="row-fluid">
        <div class="span10 offset1">
            <header id="banner" >
                <h1>
                    <a href="http://chenjiahui.hot-cool.cn/">BugManagerâ€™s Blog</a>
                </h1>
                <h3>
                     <strong>&nbsp; &nbsp; &nbsp; &nbsp; éè®¡ç®—æœºä¸“ä¸šå‡ºç”Ÿï¼Œé—­å…³è‹¦å­¦javaï¼Œè¸ä¸Šäº†ç¨‹åºçŒ¿ä¿®ä»™ä¹‹è·¯ã€‚ä»æ­¤æˆä¸ºäº†ä¸€åbug makerå…¼èŒbug cleanerï¼Œæ•…åbugç®¡ç†å‘˜ã€‚</strong>
                </h3>
                <nav class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
                        	<li><a href="http://chenjiahui.hot-cool.cn">Home</a></li>
                            <li class="active"><a href="http://chenjiahui.hot-cool.cn/category/java.html">java</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/jia-gou.html">æ¶æ„</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/other.html">other</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/python.html">python</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/qian-duan.html">å‰ç«¯</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/shu-ju-ku.html">æ•°æ®åº“</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/yun-wei.html">è¿ç»´</a></li>
                        </ul>

                    </div>
                </nav>
            </header><!-- /#banner -->
        </div>
    </div>

    <div class="row-fluid">
        <div class="span10 offset1">
            <div class="row-fluid">
<div class="span10 offset1">
  <section>
    <article>
      <header>
        <h1 class="entry-title">
          <a href="http://chenjiahui.hot-cool.cn/2018/04/08/java-LinkedHashMap.html" rel="bookmark"
             title="Permalink to Java LinkedHashMap">Java LinkedHashMap</a></h1>
      </header>
      <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="http://chenjiahui.hot-cool.cn/author/bugguan-li-yuan.html">Bugç®¡ç†å‘˜</a>
    </address>

    in <a href="http://chenjiahui.hot-cool.cn/category/java.html">java</a>

    on 2018-04-08

        |
        tags:         <a href="http://chenjiahui.hot-cool.cn/tag/java.html">java</a>
        <a href="http://chenjiahui.hot-cool.cn/tag/ji-he.html">é›†åˆ</a>



    
</footer><!-- /.post-info -->

        <h2>LinkedHashMapç®€ä»‹</h2>
<p>å¹³æ—¶å·¥ä½œä¸­å¤§å¤šæ•°åœºæ™¯ä¸€èˆ¬åªè¦æ²¡æœ‰å¤šçº¿ç¨‹éƒ½æ˜¯ç›´æ¥ä½¿ç”¨Hashmapå°±å¤Ÿç”¨äº†ã€‚æˆ‘ä¹‹å‰é¢è¯•è¿‡ä¸€äº›Javaå¼€å‘ï¼Œæœ‰ä¸€äº›ä¸€ç›´éƒ½åªç”¨Hashmapï¼Œä¹Ÿä¸çŸ¥é“å…¶ä»–Mapçš„ç‰¹è¡Œæ€§ã€‚<br>
ä½†æ˜¯Hashmapæœ‰ä¸ªé—®é¢˜ï¼Œè¿­ä»£å–å‡ºæ•°æ®æ—¶æ˜¯æŒ‰ç…§table+entryé“¾è¡¨çš„é¡ºåºè¿­ä»£çš„æ•°æ®ï¼Œå’Œputæ•°æ®æ—¶çš„é¡ºåºå¹¶æ— å…³ç³»ã€‚ </p>
<p>å¦‚æœä½¿ç”¨åœºæ™¯ï¼Œéœ€è¦mapçš„å…ƒç´ åœ¨éå†æ—¶æœ‰åºã€‚æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨LinkedHashMapäº†ã€‚  </p>
<h2>å®ç°åŸç†</h2>
<p>LinkedHashMapå¢åŠ çš„3ä¸ªå˜é‡ï¼š  </p>
<div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * The head (eldest) of the doubly linked list.</span>
<span class="cm"> * é“¾è¡¨çš„å¤´</span>
<span class="cm"> */</span>
<span class="kd">transient</span> <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">head</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * The tail (youngest) of the doubly linked list.</span>
<span class="cm"> * é“¾è¡¨çš„å°¾</span>
<span class="cm"> */</span>
<span class="kd">transient</span> <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">tail</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt;</span>
<span class="cm"> * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order.</span>
<span class="cm"> * é“¾è¡¨çš„æ’åºé¡ºåºï¼Œtrue:æŒ‰æœ€åè®¿é—®é¡ºåºæ’åºï¼ŒLRUç®—æ³•ï¼šæ ¸å¿ƒæ€æƒ³æ˜¯â€œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜ </span>
<span class="cm"> *              falseæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚</span>
<span class="cm"> */</span>
<span class="kd">final</span> <span class="kt">boolean</span> <span class="n">accessOrder</span><span class="o">;</span>
</pre></div>


<h2>æ„é€ å‡½æ•°</h2>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="nf">LinkedHashMap</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialCapacity</span><span class="o">,</span> <span class="kt">float</span> <span class="n">loadFactor</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">initialCapacity</span><span class="o">,</span> <span class="n">loadFactor</span><span class="o">);</span>
    <span class="n">accessOrder</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nf">LinkedHashMap</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialCapacity</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">initialCapacity</span><span class="o">);</span>
    <span class="n">accessOrder</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nf">LinkedHashMap</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">();</span>
    <span class="n">accessOrder</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nf">LinkedHashMap</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">K</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="n">V</span><span class="o">&gt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">();</span>
    <span class="n">accessOrder</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">putMapEntries</span><span class="o">(</span><span class="n">m</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nf">LinkedHashMap</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialCapacity</span><span class="o">,</span>
                     <span class="kt">float</span> <span class="n">loadFactor</span><span class="o">,</span>
                     <span class="kt">boolean</span> <span class="n">accessOrder</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">initialCapacity</span><span class="o">,</span> <span class="n">loadFactor</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">accessOrder</span> <span class="o">=</span> <span class="n">accessOrder</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p>æ„é€ æ–¹æ³•éƒ½ç»§æ‰¿äº†HashMapï¼Œé™¤äº†æœ€åä¸€ä¸ªæ˜¯åœ¨æ„å»ºæ—¶è®¾ç½®accessOrderï¼Œå…¶ä»–çš„éƒ½é»˜è®¤ä¸ºaccessOrder=falseï¼Œå³é»˜è®¤æŒ‰æ’å…¥é¡ºåºæ’åºã€‚  </p>
<p><strong>Entryç±»</strong>
å¯¹æ¯”HashMapå’ŒLinkedHashMapå¯ä»¥å‘ç°Entryç±»æ–°å¢äº†<code>Entry&lt;K,V&gt; before, after;</code></p>
<div class="highlight"><pre><span></span><span class="nv">static</span> <span class="nv">class</span> <span class="nv">Entry</span><span class="o">&lt;</span><span class="nv">K</span>,<span class="nv">V</span><span class="o">&gt;</span> <span class="nv">extends</span> <span class="nv">HashMap</span>.<span class="nv">Node</span><span class="o">&lt;</span><span class="nv">K</span>,<span class="nv">V</span><span class="o">&gt;</span> {
    <span class="o">//</span> <span class="nv">before</span>è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œ<span class="nv">after</span>è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„åé©±èŠ‚ç‚¹
    <span class="nv">Entry</span><span class="o">&lt;</span><span class="nv">K</span>,<span class="nv">V</span><span class="o">&gt;</span> <span class="nv">before</span>, <span class="nv">after</span><span class="c1">;</span>
    <span class="nv">Entry</span><span class="ss">(</span><span class="nv">int</span> <span class="nv">hash</span>, <span class="nv">K</span> <span class="nv">key</span>, <span class="nv">V</span> <span class="nv">value</span>, <span class="nv">Node</span><span class="o">&lt;</span><span class="nv">K</span>,<span class="nv">V</span><span class="o">&gt;</span> <span class="k">next</span><span class="ss">)</span> {
        <span class="nv">super</span><span class="ss">(</span><span class="nv">hash</span>, <span class="nv">key</span>, <span class="nv">value</span>, <span class="k">next</span><span class="ss">)</span><span class="c1">;</span>
    }
}
</pre></div>


<h2>ä¸»è¦æ–¹æ³•</h2>
<p><strong>put</strong><br>
æŸ¥çœ‹LinkedHashMapå¯ä»¥å‘ç°å®ƒæ²¡æœ‰é‡å†™putæ–¹æ³•ï¼Œåªé‡å†™äº†<code>newNode()</code>æ–¹æ³•  </p>
<div class="highlight"><pre><span></span><span class="n">Node</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="nf">newNode</span><span class="o">(</span><span class="kt">int</span> <span class="n">hash</span><span class="o">,</span> <span class="n">K</span> <span class="n">key</span><span class="o">,</span> <span class="n">V</span> <span class="n">value</span><span class="o">,</span> <span class="n">Node</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span>
        <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;(</span><span class="n">hash</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
    <span class="n">linkNodeLast</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">p</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p><code>newNode()</code>åˆ›å»ºäº†<code>LinkedHashMap.Entry</code>ï¼Œç„¶åè°ƒç”¨äº†<code>linkNodeLast</code>ï¼Œ
é€šè¿‡<code>linkNodeLast(p)</code>æ–¹æ³•ï¼Œå°†é“¾è¡¨çš„å°¾éƒ¨ä½œä¸ºèŠ‚ç‚¹pçš„å‰é©±èŠ‚ç‚¹ï¼Œpä½œä¸ºtailèŠ‚ç‚¹é“¾æ¥åˆ°é“¾è¡¨çš„å°¾éƒ¨ã€‚  </p>
<div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">linkNodeLast</span><span class="o">(</span><span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">last</span> <span class="o">=</span> <span class="n">tail</span><span class="o">;</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">last</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="n">p</span><span class="o">.</span><span class="na">before</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
        <span class="n">last</span><span class="o">.</span><span class="na">after</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p><strong>get</strong><br>
åœ¨è§£è¯»getæºç å‰ï¼Œæˆ‘ä»¬å›é¡¾ä¸‹ï¼Œä¹‹å‰æåˆ°HashMapæœ‰ä¸ªå‚æ•°<code>accessOrder</code>ï¼Œå½“getè·å–èŠ‚ç‚¹æ•°æ®æ—¶ï¼Œå¦‚æœ<code>accessOrder=true</code>æˆ‘ä»¬å°±éœ€è¦å»ä¿®æ”¹èŠ‚ç‚¹çš„é¡ºåºäº† </p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">V</span> <span class="nf">get</span><span class="o">(</span><span class="n">Object</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Node</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">e</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">((</span><span class="n">e</span> <span class="o">=</span> <span class="n">getNode</span><span class="o">(</span><span class="n">hash</span><span class="o">(</span><span class="n">key</span><span class="o">),</span> <span class="n">key</span><span class="o">))</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">accessOrder</span><span class="o">)</span>
        <span class="n">afterNodeAccess</span><span class="o">(</span><span class="n">e</span><span class="o">);</span> <span class="c1">// å¦‚æœaccessOrder=trueå°†èŠ‚ç‚¹æ”¾åˆ°é“¾è¡¨æœ«å°¾</span>
    <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p><strong>afterNodeAccess</strong>
ç®€å•çš„é“¾è¡¨æ“ä½œï¼Œå¦‚æœç†è§£å›°éš¾ï¼Œæƒ³è±¡ä¸‹å¹³æ—¶è´­ç‰©æ’é˜Ÿæ—¶å°†ä¸­é—´æŸä¸ªäººç§»åŠ¨åˆ°é˜Ÿå°¾ã€‚ğŸ˜  </p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">afterNodeAccess</span><span class="o">(</span><span class="n">Node</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// move node to last</span>
    <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">last</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">accessOrder</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">last</span> <span class="o">=</span> <span class="n">tail</span><span class="o">)</span> <span class="o">!=</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>    <span class="c1">// åªæœ‰accessOrderä¸ºtrueæ—¶å¤„ç†</span>
        <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span>
            <span class="o">(</span><span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;)</span><span class="n">e</span><span class="o">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">before</span><span class="o">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">after</span><span class="o">;</span>
        <span class="n">p</span><span class="o">.</span><span class="na">after</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="n">b</span><span class="o">.</span><span class="na">after</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
            <span class="n">a</span><span class="o">.</span><span class="na">before</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">last</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">p</span><span class="o">.</span><span class="na">before</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
            <span class="n">last</span><span class="o">.</span><span class="na">after</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">tail</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
        <span class="o">++</span><span class="n">modCount</span><span class="o">;</span> <span class="c1">//Hashmapåœ¨ç»“æ„ä¸Šè¢«ä¿®æ”¹çš„æ¬¡æ•°ã€‚</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p><strong>remove</strong><br>
LinkedHashMapæ²¡æœ‰é‡å†™removeæ–¹æ³•ï¼Œä½†æ˜¯é‡å†™äº†HashMapçš„afterNodeRemovalã€‚afterNodeRemovalåœ¨HashMapä¸­ä¸ºç©ºæ–¹æ³•ã€‚  </p>
<div class="highlight"><pre><span></span><span class="c1">// åœ¨åˆ é™¤èŠ‚ç‚¹eæ—¶ï¼ŒåŒæ­¥å°†eä»åŒå‘é“¾è¡¨ä¸Šåˆ é™¤ï¼Œå¹¶å°†beforeå’Œbeforeé“¾æ¥èµ·æ¥</span>
<span class="kt">void</span> <span class="nf">afterNodeRemoval</span><span class="o">(</span><span class="n">Node</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// unlink</span>
    <span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span>
        <span class="o">(</span><span class="n">LinkedHashMap</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span><span class="n">V</span><span class="o">&gt;)</span><span class="n">e</span><span class="o">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">before</span><span class="o">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">after</span><span class="o">;</span>
    <span class="n">p</span><span class="o">.</span><span class="na">before</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">after</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
    <span class="k">else</span>
        <span class="n">b</span><span class="o">.</span><span class="na">after</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="n">tail</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
    <span class="k">else</span>
        <span class="n">a</span><span class="o">.</span><span class="na">before</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

      </div><!-- /.entry-content -->

    </article>
  </section>
</div>
            </div>
        </div>
    </div>

    <footer id="site-footer">
        <div class="row-fluid">
            <div class="span10 offset1">
                <address>
                    <p>
                        Â© 2019  <a href="https://chenjiahui.github.io">chenjiahui</a>
                    </p>
                    <p>
                        Special thanks to <a href="http://github.com/jsliang/pelican-fresh/">Fresh</a>.
                    </p>
                </address>
            </div>
        </div>
    </footer>

    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
    
    <!-- <script>
		(function(){
		    var bp = document.createElement('script');
		    bp.src = '//push.zhanzhang.baidu.com/push.js';
		    var s = document.getElementsByTagName("script")[0];
		    s.parentNode.insertBefore(bp, s);
		})();
	</script> -->
	
</body>
</html>