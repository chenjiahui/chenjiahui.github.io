<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="author" content="chenjiahui" />
    <meta name="robots" content="index, follow"/>

    <meta property="og:title" content="Java Map"/>
    <meta property="og:url" content="http://chenjiahui.hot-cool.cn/2018/03/26/java-map.html"/>
    <meta property="og:site_name" content="BugManager’s Blog"/>
    <meta property="og:type" content="article"/>

    <link rel="canonical" href="http://chenjiahui.hot-cool.cn/2018/03/26/java-map.html" />

    <title>Java Map | BugManager’s Blog (゜-゜)つロ 干杯</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" />

    <link rel="stylesheet" type="text/css" href="http://chenjiahui.hot-cool.cn/theme/css/main.css?v=1" />

    <script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">
        stLight.options({
            publisher: "",
            doNotHash: false,
            doNotCopy: false,
            hashAddressBar: false
        });
    </script>
</head>

<body id="index">
<a class="hidden-phone" href="http://github.com/chenjiahui">
<img style="position: absolute; top: 0; left: 0; border: 0;" src="https://github.blog/wp-content/uploads/2008/12/forkme_left_white_ffffff.png" alt="Fork me on GitHub" />
</a>
    <div class="row-fluid">
        <div class="span10 offset1">
            <header id="banner" >
                <h1>
                    <a href="http://chenjiahui.hot-cool.cn/">BugManager’s Blog</a>
                </h1>
                <h3>
                     <strong>&nbsp; &nbsp; &nbsp; &nbsp; 非计算机专业出生，闭关苦学java，踏上了程序猿 - 架构狮 - CT鸥的蜕变之路。从此成为了一名bug maker兼职bug cleaner，故名bug管理员。</strong>
                </h3>
                <nav class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
                        	<li><a href="http://chenjiahui.hot-cool.cn">Home</a></li>
                            <li class="active"><a href="http://chenjiahui.hot-cool.cn/category/java.html">java</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/jia-gou.html">架构</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/other.html">other</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/python.html">python</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/qian-duan.html">前端</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/shu-ju-ku.html">数据库</a></li>
                            <li ><a href="http://chenjiahui.hot-cool.cn/category/yun-wei.html">运维</a></li>
                        </ul>

                    </div>
                </nav>
            </header><!-- /#banner -->
        </div>
    </div>

    <div class="row-fluid">
        <div class="span10 offset1">
            <div class="row-fluid">
<div class="span10 offset1">
  <section>
    <article>
      <header>
        <h1 class="entry-title">
          <a href="http://chenjiahui.hot-cool.cn/2018/03/26/java-map.html" rel="bookmark"
             title="Permalink to Java Map">Java Map</a></h1>
      </header>
      <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="http://chenjiahui.hot-cool.cn/author/bugguan-li-yuan.html">Bug管理员</a>
    </address>

    in <a href="http://chenjiahui.hot-cool.cn/category/java.html">java</a>

    on 2018-03-26

        |
        tags:         <a href="http://chenjiahui.hot-cool.cn/tag/java.html">java</a>
        <a href="http://chenjiahui.hot-cool.cn/tag/ji-he.html">集合</a>



    
</footer><!-- /.post-info -->

        <h2>前言</h2>
<p>Map是java.util中的集合类，另一个和它一样常用的是List。<br>
Map提供了一个方便的数据结构，用来存储键值对。<br>
Map根据键得到值，因此不允许键重复(重复就覆盖了)，但允许值重复。<br>
它有四个实现类，分别是HashMap、Hashtable、LinkedHashMap和TreeMap。  </p>
<h3><strong>Hash算法简述</strong></h3>
<p>常见的散列函数方法：除留余数法、直接寻址法、数字分析法、平方取中法、折叠法、随机数法<br>
常见的处理Hash冲突的方法：拉链法、线性探索法等。</p>
<h3><strong>Hashmap</strong></h3>
<p>HashMap是最常用的Map，它根据键的HashCode值存储数据，根据键可以直接获取它的值，具有很快的访问速度，遍历时，取得数据的顺序是完全随机的。    <br>
HashMap最多只允许一条记录的键为null; <br>
允许多条记录的值为null;<br>
HashMap不支持线程的同步，即任一时刻可以有多个线程同时写HashMap，可能会导致数据的不一致。
如果需要同步，可以用 Collections的synchronizedMap方法使HashMap具有同步的能力，或者使用ConcurrentHashMap。 <br>
深入解析：<a href="java-HashMap.html">HashMap</a>  </p>
<h3><strong>Hashtable</strong></h3>
<p>Hashtable与HashMap类似都实现了Map、Cloneable, Serializable接口:<br>
Hashtable继承自Dictionary类，HashMap继承自AbstractMap类。  <br>
Hashtable不允许记录的键或者值为null，HashMap允许记录的键和值为null。<br>
Hashtable初始容量为11，HashMap的初始1容量为16。
Hashtable在链表变大时，不会改变链表结构，HashMap在链表长度达到<code>TREEIFY_THRESHOLD=8</code>时会转为红黑树(JDK1.8)。 <br>
Hashtable的许多方法中使用了synchronized关键字，所以Hashtable是线程安全的，即任一时刻只有一个线程能写Hashtable，这也导致了Hashtable在写入时会比较慢。
如果在非线程安全的情况下，建议使用HashMap。如果在线程安全的情况下可以使用Hashtable，不过官方还是建议使用ConcurrentHashMap。    </p>
<h3><strong>LinkedHashMap</strong></h3>
<p>是HashMap的一个子类，保存了记录的插入顺序，在用Iterator遍历LinkedHashMap时，先得到的记录肯定是先插入的。
也可以在构造时用带参数，按照应用次数排序。
在遍历的时候会比HashMap慢，不过有种情况例外，当HashMap容量很大，实际数据较少时，遍历起来可能会比 LinkedHashMap慢，
因为LinkedHashMap的遍历速度只和实际数据有关，和容量无关，而HashMap的遍历速度和他的容量有关。 </p>
<h3><strong>TreeMap</strong></h3>
<p>实现NavigableMap接口，而NavigableMap接口是继承自SortMap接口的，所以TreeMap能够把它保存的记录根据键排序，默认是按键值的升序排序，也可以指定排序的比较器，当用Iterator 遍历TreeMap时，得到的记录是排过序的。</p>
<h3><strong>ConcurrentHashMap</strong></h3>
<p>ConcurrentHashMap与HashTable相比在线程安全方面做的更加的细致，并发数是根据桶的个数来确定的。
HashTable对整个结构加锁，而ConcurrentHashMap是对每个桶加锁，不同的桶单独操作，互不影响。
synchronized也不像HashTable那样直接暴力的修饰整个方法。 </p>
<p>一般情况下，我们用的最多的是HashMap，在Map 中插入、删除和定位元素，HashMap 是最好的选择。
但如果要按自然顺序或自定义顺序遍历键，那么TreeMap会更好。
如果需要输出的顺序和输入的相同，那么用LinkedHashMap 可以实现，它还可以按读取顺序来排列。
如果在多线程下使用，则建议使用ConcurrentHashMap，它的性能相比<code>Collections.synchronizedMap(HashMap)</code>，<code>Hashtable</code>要高出很多。</p>

      </div><!-- /.entry-content -->

    </article>
  </section>
</div>
            </div>
        </div>
    </div>

    <footer id="site-footer">
        <div class="row-fluid">
            <div class="span10 offset1">
                <address>
                    <p>
                        © 2019  <a href="https://chenjiahui.github.io">chenjiahui</a>
                    </p>
                    <p>
                        Special thanks to <a href="http://github.com/jsliang/pelican-fresh/">Fresh</a>.
                    </p>
                </address>
            </div>
        </div>
    </footer>

    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
    
    <!-- <script>
		(function(){
		    var bp = document.createElement('script');
		    bp.src = '//push.zhanzhang.baidu.com/push.js';
		    var s = document.getElementsByTagName("script")[0];
		    s.parentNode.insertBefore(bp, s);
		})();
	</script> -->
	
</body>
</html>