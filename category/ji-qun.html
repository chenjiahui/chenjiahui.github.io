<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <title>BugManager’s Blog - 集群</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">BugManager’s Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/flex.html">Flex</a></li>
                    <li><a href="/category/java.html">java</a></li>
                    <li class="active"><a href="/category/ji-qun.html">集群</a></li>
                    <li><a href="/category/linux.html">Linux</a></li>
                    <li><a href="/category/other.html">other</a></li>
                    <li><a href="/category/python.html">python</a></li>
                    <li><a href="/category/qian-duan.html">前端</a></li>
                    <li><a href="/category/shu-ju-ku.html">数据库</a></li>
                    <li><a href="/category/yun-wei.html">运维</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/46419465.html">集群负载均衡算法原理</a></h1>
<footer class="post-info">
        <abbr class="published" title="2015-06-08T23:05:17+00:00">
                Published: 一 08 六月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/bugguan-li-yuan.html">Bug管理员</a>
        </address>
<p>In <a href="/category/ji-qun.html">集群</a>.</p>
<p>tags: <a href="/tag/ji-qun.html">集群</a> </p>
</footer><!-- /.post-info --><p>版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/nicky9470/article/details/46419465 </p>
<p>最近打算往互联网方向发展，研究了下集群的负载均衡。其实早就应该去了解学习了。如有理解不到位的地方，还望各大神指出。</p>
<p>负载均衡算法是集群在调度时，选择具体调度和分发方式的逻辑。</p>
<p>目前流行和常用的算法有：轮询算法，Hash算法，Session，最小连接数，最大空闲等。</p>
<p>1、轮询算法：</p>
<p>实现方式：把每一次的用户请求，按顺序循环分配给集群内部的一台服务器。优点是算法简洁，无状态。</p>
<p>2、权重轮询算法</p>
<p>由于服务器的处理能力不同，可以再给服务器加权。也就是权重轮询算法。</p>
<p>3、Hash算法</p>
<p>一般就是将请求中的某项数据做hash运算，然后根据集群的服务器总数n取模，根据取模后的值分配服务器。</p>
<p>一般可以根据请求时间，请求来源的ip等来做散列运算。</p>
<p>java中哈希值的算法：</p>
<div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="ss">&quot;hello&quot;</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">hashCode</span><span class="p">();</span>
</pre></div>


<p>4、一致性Hash算法</p>
<p><a href="http://blog.csdn.net/cywosp/article/details/23397179/">http://blog.csdn.net/cywosp/article/details/23397179/</a></p>
<p>5、Session算法</p>
<p>此算法是解决WEB集群会话问题最简单的方式。</p>
<p>与轮询算法类似，当用户发起请求时检查，若该请求的SessionID是首次发起的请求，则根据SessionID使用轮询算法选择服务器，当再次发起同一sessionID的请求时，直接转发给之前选择的服务器。使得服务器的缓存得到更好的利用。</p>
<p>6、最少连接数请求，最大空闲请求</p>
<p>如ftp，云服务等，若使用前面的几种算法，可能会由于客户端的连接时间不同，导致部分服务器连接数过多，压力过大。</p>
<p>最小连接数算法，根据服务器当前的连接情况，把请求转发给当前连接数少的服务器。</p>
<p>最大空闲请求，也是类似。可以根据服务器性能的不同做加权。</p>
<p>﻿﻿</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="#">友情链接1</a></li>
                            <li><a href="#">友情链接2</a></li>
                            <li><a href="#">友情链接3</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://api.qiangwoapp.com/">抢我APP</a></li>
                            <li><a href="https://api.qiangwoapp.com/">吻别APP</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>